<h3 :data-orientation="orientation" :data-state="isOpen(value) ? 'open' : 'closed'"
    class="duration-300 ease-in-out transition-[width]"
    :class="
        orientation === 'horizontal' 
        ? isOpen(value)
            ? 'h-full w-16 shrink-0' 
            : 'h-full w-full' 
        : 'flex'
    "
>
    <button
        x-init="if (disabled) setDisabled($el);"
        @click="toggle(value)"
        :aria-expanded="isOpen(value)"
        :data-state="isOpen(value) ? 'open' : 'closed'"
        :data-orientation="orientation"
        type="button"
        class="focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring font-medium transition-colors hover:bg-accent hover:text-accent-foreground disabled:pointer-events-none disabled:opacity-50 text-start{% if class %} {{ class }}{% endif %}"
        :class="
            orientation === 'horizontal'
            ? 'w-full h-full flex flex-col items-center justify-between gap-2 p-4 [&[data-state=open]>svg]:rotate-90'
            : 'w-full flex items-center justify-between gap-2 py-4  [&[data-state=open]>svg]:rotate-180'
        "
        {{ attrs }}
    >
        <span class="text-sm" :class="orientation === 'horizontal' ? '[writing-mode:vertical-lr] order-last rotate-180' : ''">
            {{ slot }}
        </span>
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" 
            class="transition-transform duration-200 shrink-0"
            :class="
                orientation === 'horizontal'
                ? dir === 'rtl' ? 'rotate-90' : '-rotate-90'  /* Flip icon direction for RTL */
                : ''
            "
        >
            <path d="m6 9 6 6 6-6"></path>
        </svg>
    </button>
</h3>